@startuml
title Cave Mapper - UI/UX User Flow

skinparam backgroundColor #FFFFFF
skinparam state {
  BackgroundColor #E3F2FD
  BorderColor #1976D2
  ArrowColor #1976D2
}

[*] --> LandingPage : User visits site

state LandingPage {
  LandingPage : ðŸ  Cave Local Pre-MVP
  LandingPage : API Connection Status
  LandingPage : Sample shot data pre-filled
}

LandingPage --> DataEntry : Ready to use

state DataEntry {
  DataEntry : ðŸ“Š Shot Data Grid
  DataEntry : â€¢ From/To stations
  DataEntry : â€¢ Distance, Azimuth, Inclination  
  DataEntry : â€¢ Real-time validation
  DataEntry : â€¢ Add/Remove shots
}

state ValidationError {
  ValidationError : âŒ Input Errors
  ValidationError : â€¢ Required fields missing
  ValidationError : â€¢ Invalid ranges
  ValidationError : â€¢ Fix before proceeding
}

DataEntry --> ValidationError : Invalid input
ValidationError --> DataEntry : User corrects

DataEntry --> Processing : Click "Reduce" or "Plot"

state Processing {
  Processing : â³ Backend Processing
  Processing : â€¢ "Reducing..." or "Plotting..."
  Processing : â€¢ Cave survey calculations
  Processing : â€¢ Coordinate transformations
}

state Results {
  Results : âœ… Survey Results
  Results : â€¢ Metadata display (JSON)
  Results : â€¢ Cave plot visualization
  Results : â€¢ Station coordinates
  Results : â€¢ Distance calculations
}

Processing --> Results : Success
Processing --> ErrorState : Network/Server error

state ErrorState {
  ErrorState : âŒ Error Display
  ErrorState : â€¢ "Reduce error: ..."
  ErrorState : â€¢ "Plot error: ..."
  ErrorState : â€¢ User can retry
}

ErrorState --> DataEntry : User fixes & retries

Results --> FeedbackForm : Scroll down

state FeedbackForm {
  FeedbackForm : ðŸ’¡ Submit an Idea
  FeedbackForm : â€¢ Textarea for feedback
  FeedbackForm : â€¢ "Submit Idea" button
  FeedbackForm : â€¢ Encouraging text
}

state FeedbackSubmitting {
  FeedbackSubmitting : â³ Submitting...
  FeedbackSubmitting : â€¢ Button disabled
  FeedbackSubmitting : â€¢ Loading state
}

state FeedbackSuccess {
  FeedbackSuccess : âœ… Thank you!
  FeedbackSuccess : â€¢ Success message
  FeedbackSuccess : â€¢ Textarea cleared
  FeedbackSuccess : â€¢ Ready for next feedback
}

state FeedbackError {
  FeedbackError : âŒ Submission failed
  FeedbackError : â€¢ Error message
  FeedbackError : â€¢ Textarea preserved
  FeedbackError : â€¢ User can retry
}

FeedbackForm --> FeedbackSubmitting : Click "Submit Idea"
FeedbackSubmitting --> FeedbackSuccess : Success
FeedbackSubmitting --> FeedbackError : Network/Server error
FeedbackError --> FeedbackForm : User retries
FeedbackSuccess --> FeedbackForm : User submits more

' Additional flows
Results --> DataEntry : User modifies data
FeedbackForm --> DataEntry : Continue working

' Admin flow (separate)
state AdminAccess {
  AdminAccess : ðŸ”§ Admin Panel
  AdminAccess : GET /admin/feedback
  AdminAccess : â€¢ View all submissions
  AdminAccess : â€¢ Ordered by date
  AdminAccess : â€¢ Category & metadata
}

note right of LandingPage
  **Key UX Principles:**
  â€¢ Immediate usability (pre-filled data)
  â€¢ Real-time feedback
  â€¢ Clear error messages
  â€¢ Progressive disclosure
  â€¢ Encouragement for feedback
end note

note right of FeedbackForm
  **Feedback Design:**
  â€¢ Non-intrusive placement
  â€¢ Friendly, encouraging tone
  â€¢ Simple single-field interface
  â€¢ Immediate confirmation
  â€¢ No authentication required
end note

note right of Results
  **Result Presentation:**
  â€¢ Technical data (JSON metadata)
  â€¢ Visual representation (PNG)
  â€¢ Scrollable layout
  â€¢ Maximum width constraints
  â€¢ Professional styling
end note

@enduml